<?php
$this->htmlElement('body')->appendAttribute('class', 'add item');
$this->headScript()->appendFile($this->assetUrl('js/item-form.js', 'Omeka'));
$form->prepare();
$formLabel = $this->plugin('formLabel');
$formElement = $this->plugin('formElement');
$formErrors = $this->plugin('formElementErrors');
$inputOptions = '<div class="input-options">
                        <a link="#" class="tab active fa-text"><span class="screen-reader-text">Text</span></a>
                        <a link="#" class="tab fa-items"><span class="screen-reader-text">Omeka Item</span></a>
                        <a link="#" class="tab fa-link"><span class="screen-reader-text">External Resource</span></a>
                 </div>';
?>
<h1><?php echo $this->translate('Add Item'); ?></h1>
<?php 
if (isset($errors)) {
    print_r($errors);
}
?>

<nav class="section-nav">
    <ul>
        <li><a href="#" class="resource-values section active">Values</a></li>
        <li><a href="#" class="item-media section">Media</a></li>
        <li><a href="#" class="item-visibility section">Visibility</a></li>
    </ul>
</nav>

<form method='post' id='add-item'>
    <fieldset id='resource-values' class='section active'>
        <?php foreach ($form->getElements() as $element): ?>
        <?php if ($element->getLabel()): ?>
        <div class="resource-values field">
            <div class='field-meta'>
            <?php echo $formLabel($element); ?>
                <div class='field-description'>
                    <p class="fa-info-circle"><span class="screen-reader-text">More Info</span></p>
                </div>
            </div>

            <div class='inputs'>
            <?php 
                echo $formElement($element);
            ?>
            </div>

            <?php
            echo $formErrors($element);
            ?>
        </div>
        <?php else: ?>
        <!-- Display the hidden input for the property id -->
        <?php echo $formElement($element); ?>
        <?php endif; ?>
        <?php endforeach; ?>

        <div class='new resource-values field unset'>
            <div class='field-meta'>
                <div class='properties'>
                    <ul>
                        <li class='all-vocabs'>
                            Vocabularies <span class='count'><?php echo count($vocabularies); ?></span>
                            <ul>
                                <?php foreach ($vocabularies as $label => $vocabulary) : ?>
                                <li class='vocabulary'>
                                    <?php echo $label; ?>
                                    <ul>
                                        <?php foreach ($vocabulary as $propertyInfo) : ?>
                                        <li class='property' data-property-id='<?php echo $propertyInfo["id"]?>'>
                                            <?php echo $propertyInfo['label']; ?>
                                            <div class='description'>
                                                <p class='icon-info'>
                                                    <span class='screen-reader-text'>More Info</span>
                                                </p>
                                                <p>
                                                <?php echo $propertyInfo['comment']; ?>
                                                </p>
                                            </div>
                                            <button class='set-property'>Set Property</button>
                                        </li>
                                        <?php endforeach; ?>
                                    </ul>
                                </li>
                                <?php endforeach; ?>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </fieldset>

    <fieldset id="save-sidebar">
        <input type="submit" name="add-item-submit" value="Create Item" />
        <a href="#" class="cancel button">Cancel</a>
    </fieldset>
</form>

